<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>audio_janq0 API documentation</title>
<meta name="description" content="Module for audio synthesis and effects â€¦">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>audio_janq0</code></h1>
</header>
<section id="section-intro">
<p>Module for audio synthesis and effects</p>
<h2 id="introduction">Introduction</h2>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Make sure that before using the library, your volume is at
a reasonable level. Playing loud pure tones may cause damage to
speakers. (This has happened to me on my laptop speakers ðŸ¤¦)</p>
</div>
<p>I created a few code snippets for the reader to get a feel for the library.
Each of them implicitely has <code>import <a title="audio_janq0" href="#audio_janq0">audio_janq0</a> as a</code>.</p>
<pre><code>mysound = a.sine(800)  # An infinite 800 Hz sine wave
</code></pre>
<p>The type of <code>mysound</code> is <code><a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></code>, which is the fundamental class of this
module. As we can see, its instances can also be infinite, so before
we play it, we must first convert to a finite signal. This can be done
with <code><a title="audio_janq0.Signal.over" href="#audio_janq0.Signal.over">Signal.over()</a></code>.</p>
<pre><code>finite = mysound.over(2)  # The first 2 seconds of mysound
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code><a title="audio_janq0.FinSignal.play" href="#audio_janq0.FinSignal.play">FinSignal.play()</a></code> peak-normalizes the sound, so you don't have to
worry about the final volume or clipping</p>
</div>
<pre><code>finite.play()  # ðŸŽµ
</code></pre>
<p>We can combine multiple signals using Python's usual arithmetic
operations.</p>
<pre><code>chord = a.triangle(400) + a.rect(500) + a.sine(600)
volume = 1 + sine(2)
mysound = chord * volume
</code></pre>
<p>BTW, we can also pass <em>signals</em> to wave-form generating functions (like
to voltage-controlled oscillators):</p>
<pre><code>vibrato = a.triangle(600 + 10 * a.sine(5))
</code></pre>
<p>To layer/join multiple signals in series, use <code><a title="audio_janq0.compose" href="#audio_janq0.compose">compose()</a></code>.</p>
<hr>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Standard SI units are used in parameters that represent
quantities unless it's specified otherwise.</p>
</div>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-variables">Global variables</h2>
<dl>
<dt id="audio_janq0.SignalLike"><code class="name">var <span class="ident">SignalLike</span></code></dt>
<dd>
<div class="desc"><p>Union of types which are convertible into <code><a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></code></p>
<p>Many functions in this module accept this type as a parameter instead
of only <code><a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></code> to make the interface more comfortable for the user.
The following shared rules are then used for conversion:</p>
<ul>
<li>a <em>float</em> gets converted to an infinite constant signal with
the corresponding value,</li>
<li>an <em>iterable of floats</em> gets converted to a signal with those <code><a title="audio_janq0.Signal.frames" href="#audio_janq0.Signal.frames">Signal.frames</a></code>,</li>
<li>a <em>signal</em> stays unchanged.</li>
</ul></div>
</dd>
<dt id="audio_janq0.samprate"><code class="name">var <span class="ident">samprate</span></code></dt>
<dd>
<div class="desc"><p>The global sample rate which is used in the library</p>
<p>You may change this variable at the beginning of your program to trade
speed for audio quality. The default is <code>44_100.0</code></p></div>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="audio_janq0.compose"><code class="name flex">
<span>def <span class="ident">compose</span></span>(<span>*table:Â tuple[<a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>,Â float]Â |Â <a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a>) â€‘>Â <a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def compose(*table: tuple[SignalLike, float] | FinSignal) -&gt; FinSignal:
    &#34;&#34;&#34;Compose multiple signals in series

    Each argument can either be a

    - (`Signal`, `float`) tuple: which starts playing signal and waits before playing
    the next signal in sequence for a duration specified by the float value.
    This allows for overlapping signals
    - `FinSignal` which corresponds to (`FinSignal`, `FinSignal.dur`) of
    the previous point.
    &#34;&#34;&#34;
    tot_frames = round(
        sum(
            len(item.frames) if isinstance(item, FinSignal) else item[1] * samprate
            for item in table
        )
    )
    result = FinSignal([0] * tot_frames)
    start = 0
    for item in table:
        if isinstance(item, tuple):
            sig, dur = item
            dur_frames = round(dur * samprate)
            sig = Signal(sig).extend()
        elif isinstance(item, FinSignal):
            sig = item
            dur_frames = len(item.frames)
        for i, x in enumerate(sig.frames):
            if start + i &gt;= tot_frames:
                break
            result.frames[start + i] += x
        start += dur_frames
    return FinSignal(result)</code></pre>
</details>
<div class="desc"><p>Compose multiple signals in series</p>
<p>Each argument can either be a</p>
<ul>
<li>(<code><a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></code>, <code>float</code>) tuple: which starts playing signal and waits before playing
the next signal in sequence for a duration specified by the float value.
This allows for overlapping signals</li>
<li><code><a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a></code> which corresponds to (<code><a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a></code>, <code><a title="audio_janq0.FinSignal.dur" href="#audio_janq0.FinSignal.dur">FinSignal.dur</a></code>) of
the previous point.</li>
</ul></div>
</dd>
<dt id="audio_janq0.decay"><code class="name flex">
<span>def <span class="ident">decay</span></span>(<span>tau:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decay(tau: SignalLike) -&gt; Signal:
    &#34;&#34;&#34;An exponential decay signal starting at 1 and approaching
    0 with time constant tau.&#34;&#34;&#34;
    return stepdown().lowpasst(tau)</code></pre>
</details>
<div class="desc"><p>An exponential decay signal starting at 1 and approaching
0 with time constant tau.</p></div>
</dd>
<dt id="audio_janq0.exp"><code class="name flex">
<span>def <span class="ident">exp</span></span>(<span>) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def exp() -&gt; Signal:
    &#34;&#34;&#34;An exponential signal starting at one and doubling every
    second&#34;&#34;&#34;
    return 2 ** linear()</code></pre>
</details>
<div class="desc"><p>An exponential signal starting at one and doubling every
second</p></div>
</dd>
<dt id="audio_janq0.linear"><code class="name flex">
<span>def <span class="ident">linear</span></span>(<span>) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def linear() -&gt; Signal:
    &#34;&#34;&#34;A linear signal starting at 0 with a unit slope in
    seconds.&#34;&#34;&#34;
    return Signal(it.count(step=1 / samprate))</code></pre>
</details>
<div class="desc"><p>A linear signal starting at 0 with a unit slope in
seconds.</p></div>
</dd>
<dt id="audio_janq0.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>file:Â wave.Wave_read) â€‘>Â <a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def load(file: wave.Wave_read) -&gt; FinSignal:
    &#34;&#34;&#34;Load a signal from a wave file with the correct parameters.

    To convert a general audio file to the desired format, one can use
    the command-line utility `ffmpeg`:

    ```sh
    ffmpeg -i &lt;input_file&gt; -ac 1 -ar &lt;samprate&gt; output_file.wav
    ```

    Then use this function like so:

    ```python
    signal = a.load(a.wave.open(&#39;output_file.wav&#39;, &#39;rb&#39;))
    ```
    &#34;&#34;&#34;
    with file as f:
        if (
            f.getnchannels() == 1
            and f.getsampwidth() == 2
            and f.getframerate() == samprate
            and f.getcomptype() == &#34;NONE&#34;
        ):
            n = f.getnframes()
            frames = [x for (x,) in struct.iter_unpack(&#34;h&#34;, f.readframes(n))]
            return FinSignal(frames)
        else:
            print(f.getparams())
            raise ValueError(
                f&#34;file must have 1 channel, 2 byte samples,&#34;
                f&#34;sample rate of {samprate} and no compression.&#34;
            )</code></pre>
</details>
<div class="desc"><p>Load a signal from a wave file with the correct parameters.</p>
<p>To convert a general audio file to the desired format, one can use
the command-line utility <code>ffmpeg</code>:</p>
<pre><code class="language-sh">ffmpeg -i &lt;input_file&gt; -ac 1 -ar &lt;samprate&gt; output_file.wav
</code></pre>
<p>Then use this function like so:</p>
<pre><code class="language-python">signal = a.load(a.wave.open('output_file.wav', 'rb'))
</code></pre></div>
</dd>
<dt id="audio_janq0.rect"><code class="name flex">
<span>def <span class="ident">rect</span></span>(<span>freq:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def rect(freq: SignalLike) -&gt; Signal:
    &#34;&#34;&#34;The signal of a rectangular wave form with peaks at 1 and -1&#34;&#34;&#34;
    return sine(freq).map(lambda x: 1 if x &gt;= 0 else -1)</code></pre>
</details>
<div class="desc"><p>The signal of a rectangular wave form with peaks at 1 and -1</p></div>
</dd>
<dt id="audio_janq0.rise"><code class="name flex">
<span>def <span class="ident">rise</span></span>(<span>tau:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def rise(tau: SignalLike) -&gt; Signal:
    &#34;&#34;&#34;An exponential rise signal starting at 0 and approaching
    1 with time constant tau.&#34;&#34;&#34;
    return step().lowpasst(tau)</code></pre>
</details>
<div class="desc"><p>An exponential rise signal starting at 0 and approaching
1 with time constant tau.</p></div>
</dd>
<dt id="audio_janq0.saw"><code class="name flex">
<span>def <span class="ident">saw</span></span>(<span>freq:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def saw(freq: SignalLike) -&gt; Signal:
    &#34;&#34;&#34;A sawtooth wave-form with peaks at 1 and -1&#34;&#34;&#34;

    def frames():
        out = 0
        for f in Signal(freq).frames:
            yield out
            step = f / samprate
            if out + step &gt;= 1:
                out = -2 + out + step
            out += f / samprate

    return Signal(frames())</code></pre>
</details>
<div class="desc"><p>A sawtooth wave-form with peaks at 1 and -1</p></div>
</dd>
<dt id="audio_janq0.sine"><code class="name flex">
<span>def <span class="ident">sine</span></span>(<span>freq:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def sine(freq: SignalLike) -&gt; Signal:
    &#34;&#34;&#34;A unit sine signal with the specified frequency signal input&#34;&#34;&#34;
    freq = Signal(freq)

    def frames() -&gt; Iterable[float]:
        x, y = 1.0, 0.0
        for f in freq.frames:
            yield y
            d = 2 * pi * f / samprate
            # Apply the rotation matrix
            x, y = x * cos(d) - y * sin(d), x * sin(d) + y * cos(d)

    return Signal(frames())</code></pre>
</details>
<div class="desc"><p>A unit sine signal with the specified frequency signal input</p></div>
</dd>
<dt id="audio_janq0.step"><code class="name flex">
<span>def <span class="ident">step</span></span>(<span>) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def step() -&gt; Signal:
    &#34;&#34;&#34;The signal of a unit step function&#34;&#34;&#34;
    return Signal(it.chain([0.0], it.repeat(1.0)))</code></pre>
</details>
<div class="desc"><p>The signal of a unit step function</p></div>
</dd>
<dt id="audio_janq0.stepdown"><code class="name flex">
<span>def <span class="ident">stepdown</span></span>(<span>) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def stepdown() -&gt; Signal:
    &#34;&#34;&#34;The signal of a unit step down function (starting at 1
    and immediately going to 0)&#34;&#34;&#34;
    return Signal(it.chain([1.0], it.repeat(0.0)))</code></pre>
</details>
<div class="desc"><p>The signal of a unit step down function (starting at 1
and immediately going to 0)</p></div>
</dd>
<dt id="audio_janq0.triangle"><code class="name flex">
<span>def <span class="ident">triangle</span></span>(<span>freq:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def triangle(freq: SignalLike) -&gt; Signal:
    &#34;&#34;&#34;A triangle wave form with peaks at 1 and -1&#34;&#34;&#34;

    def frames():
        out = 0
        d = 1
        for f in Signal(freq).frames:
            yield out
            step = 2 * f / samprate
            if d == 1 and out + step &gt;= 1:
                out = 2 - out - step
                d = -d
            elif d == -1 and out - step &lt;= -1:
                out = -2 - (out - step)
                d = -d
            else:
                out += d * step

    return Signal(frames())</code></pre>
</details>
<div class="desc"><p>A triangle wave form with peaks at 1 and -1</p></div>
</dd>
<dt id="audio_janq0.white"><code class="name flex">
<span>def <span class="ident">white</span></span>(<span>) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def white() -&gt; Signal:
    &#34;&#34;&#34;White noise generated by random numbers from the range (-1, 1)
    at each frame&#34;&#34;&#34;
    return Signal(random.uniform(-1.0, 1.0) for _ in it.repeat(None))</code></pre>
</details>
<div class="desc"><p>White noise generated by random numbers from the range (-1, 1)
at each frame</p></div>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="audio_janq0.FinSignal"><code class="flex name class">
<span>class <span class="ident">FinSignal</span></span>
<span>(</span><span>input:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class FinSignal(Signal):
    &#34;&#34;&#34;A subclass of Signal for Finite signals&#34;&#34;&#34;

    frames: list[float]
    &#34;&#34;&#34;Unlike `Signal`, `FinSignal.frames` is a list, so we can iterate
    over it howmany times we want.&#34;&#34;&#34;

    def __init__(self, input: SignalLike) -&gt; None:
        self.frames = list(Signal(input).frames)

    def __repr__(self) -&gt; str:
        self.play()
        return Signal.__repr__(self)

    @property
    def dur(self):
        &#34;&#34;&#34;The duration of the signal&#34;&#34;&#34;
        return len(self.frames) / samprate

    def play(self) -&gt; None:
        &#34;&#34;&#34;Play the peak-normalised signal

        .. note::
           This method relies on the `aplay` command-line utility, so it
           won&#39;t work unless you have `aplay` installed.
        &#34;&#34;&#34;
        sound = self.normalised() * 32767
        cmd = [&#34;aplay&#34;, &#34;-f&#34;, &#34;S16_LE&#34;, &#34;-r&#34;, str(round(samprate))]
        with Popen(cmd, stdin=PIPE) as player:
            if player.stdin is None:
                raise ValueError
            for fr in sound.frames:
                player.stdin.write(struct.pack(&#34;h&#34;, round(fr)))
                player.stdin.flush()

    def export(self, file: wave.Wave_write) -&gt; None:
        &#34;&#34;&#34;Export the peak-normalised signal to the specified wav file
        object
    
        Use this method like this:

        ```python
        signal.export_wav(a.wave.open(&#39;output_file.wav&#39;, &#39;wb&#39;))
        ```
        &#34;&#34;&#34;
        
        sound = self.normalised() * 32767
        with file as f:
            f.setsampwidth(2)
            f.setnchannels(1)
            f.setframerate(samprate)
            for frame in sound.frames:
                f.writeframes(struct.pack(&#34;h&#34;, round(frame)))

    def normalised(self) -&gt; FinSignal:
        &#34;&#34;&#34;Peak-normalise the sound to (-1, 1)&#34;&#34;&#34;
        if not self.frames:
            return self
        maxi = max(self.frames)
        mini = min(self.frames)
        amp = (maxi - mini) / 2
        shift = (maxi + mini) / 2
        return (self - shift) / amp

    def reversed(self) -&gt; FinSignal:
        &#34;&#34;&#34;Reverse the signal in time&#34;&#34;&#34;
        return FinSignal(reversed(self.frames))

    def reverb(self, imp_resp: FinSignal) -&gt; FinSignal:
        &#34;&#34;&#34;Apply a convolution reverb with the specified impulse
        response&#34;&#34;&#34;
        return FinSignal(_convolve(self.frames, imp_resp.frames))</code></pre>
</details>
<div class="desc"><p>A subclass of Signal for Finite signals</p>
<p>Create a signal from a SignalLike input</p></div>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="audio_janq0.FinSignal.dur"><code class="name">prop <span class="ident">dur</span></code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def dur(self):
    &#34;&#34;&#34;The duration of the signal&#34;&#34;&#34;
    return len(self.frames) / samprate</code></pre>
</details>
<div class="desc"><p>The duration of the signal</p></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="audio_janq0.FinSignal.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self, file:Â wave.Wave_write) â€‘>Â None</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def export(self, file: wave.Wave_write) -&gt; None:
    &#34;&#34;&#34;Export the peak-normalised signal to the specified wav file
    object

    Use this method like this:

    ```python
    signal.export_wav(a.wave.open(&#39;output_file.wav&#39;, &#39;wb&#39;))
    ```
    &#34;&#34;&#34;
    
    sound = self.normalised() * 32767
    with file as f:
        f.setsampwidth(2)
        f.setnchannels(1)
        f.setframerate(samprate)
        for frame in sound.frames:
            f.writeframes(struct.pack(&#34;h&#34;, round(frame)))</code></pre>
</details>
<div class="desc"><p>Export the peak-normalised signal to the specified wav file
object</p>
<p>Use this method like this:</p>
<pre><code class="language-python">signal.export_wav(a.wave.open('output_file.wav', 'wb'))
</code></pre></div>
</dd>
<dt id="audio_janq0.FinSignal.normalised"><code class="name flex">
<span>def <span class="ident">normalised</span></span>(<span>self) â€‘>Â <a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def normalised(self) -&gt; FinSignal:
    &#34;&#34;&#34;Peak-normalise the sound to (-1, 1)&#34;&#34;&#34;
    if not self.frames:
        return self
    maxi = max(self.frames)
    mini = min(self.frames)
    amp = (maxi - mini) / 2
    shift = (maxi + mini) / 2
    return (self - shift) / amp</code></pre>
</details>
<div class="desc"><p>Peak-normalise the sound to (-1, 1)</p></div>
</dd>
<dt id="audio_janq0.FinSignal.play"><code class="name flex">
<span>def <span class="ident">play</span></span>(<span>self) â€‘>Â None</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def play(self) -&gt; None:
    &#34;&#34;&#34;Play the peak-normalised signal

    .. note::
       This method relies on the `aplay` command-line utility, so it
       won&#39;t work unless you have `aplay` installed.
    &#34;&#34;&#34;
    sound = self.normalised() * 32767
    cmd = [&#34;aplay&#34;, &#34;-f&#34;, &#34;S16_LE&#34;, &#34;-r&#34;, str(round(samprate))]
    with Popen(cmd, stdin=PIPE) as player:
        if player.stdin is None:
            raise ValueError
        for fr in sound.frames:
            player.stdin.write(struct.pack(&#34;h&#34;, round(fr)))
            player.stdin.flush()</code></pre>
</details>
<div class="desc"><p>Play the peak-normalised signal</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method relies on the <code>aplay</code> command-line utility, so it
won't work unless you have <code>aplay</code> installed.</p>
</div></div>
</dd>
<dt id="audio_janq0.FinSignal.reverb"><code class="name flex">
<span>def <span class="ident">reverb</span></span>(<span>self,<br>imp_resp:Â <a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a>) â€‘>Â <a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reverb(self, imp_resp: FinSignal) -&gt; FinSignal:
    &#34;&#34;&#34;Apply a convolution reverb with the specified impulse
    response&#34;&#34;&#34;
    return FinSignal(_convolve(self.frames, imp_resp.frames))</code></pre>
</details>
<div class="desc"><p>Apply a convolution reverb with the specified impulse
response</p></div>
</dd>
<dt id="audio_janq0.FinSignal.reversed"><code class="name flex">
<span>def <span class="ident">reversed</span></span>(<span>self) â€‘>Â <a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reversed(self) -&gt; FinSignal:
    &#34;&#34;&#34;Reverse the signal in time&#34;&#34;&#34;
    return FinSignal(reversed(self.frames))</code></pre>
</details>
<div class="desc"><p>Reverse the signal in time</p></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></b></code>:
<ul class="hlist">
<li><code><a title="audio_janq0.Signal.delay" href="#audio_janq0.Signal.delay">delay</a></code></li>
<li><code><a title="audio_janq0.Signal.distort" href="#audio_janq0.Signal.distort">distort</a></code></li>
<li><code><a title="audio_janq0.Signal.extend" href="#audio_janq0.Signal.extend">extend</a></code></li>
<li><code><a title="audio_janq0.Signal.frames" href="#audio_janq0.Signal.frames">frames</a></code></li>
<li><code><a title="audio_janq0.Signal.highpass" href="#audio_janq0.Signal.highpass">highpass</a></code></li>
<li><code><a title="audio_janq0.Signal.highpasst" href="#audio_janq0.Signal.highpasst">highpasst</a></code></li>
<li><code><a title="audio_janq0.Signal.lowpass" href="#audio_janq0.Signal.lowpass">lowpass</a></code></li>
<li><code><a title="audio_janq0.Signal.lowpasst" href="#audio_janq0.Signal.lowpasst">lowpasst</a></code></li>
<li><code><a title="audio_janq0.Signal.map" href="#audio_janq0.Signal.map">map</a></code></li>
<li><code><a title="audio_janq0.Signal.over" href="#audio_janq0.Signal.over">over</a></code></li>
<li><code><a title="audio_janq0.Signal.repeat" href="#audio_janq0.Signal.repeat">repeat</a></code></li>
<li><code><a title="audio_janq0.Signal.tee" href="#audio_janq0.Signal.tee">tee</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="audio_janq0.Signal"><code class="flex name class">
<span>class <span class="ident">Signal</span></span>
<span>(</span><span>input:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Signal:
    &#34;&#34;&#34;The fundamental class of the module for discrete signals

    This type supports all the usual Python arithmetic operations,
    which perform their float equivalents for each frame. For binary
    operations, the resulting signal is only as long as the shortest
    input signal.

    .. note::
       In the context of audio manipulation, we can use instances of this
       class both as audio signals and control signals e.g. to control
       volume or pitch.
    &#34;&#34;&#34;

    frames: Iterable[float]
    &#34;&#34;&#34;
    This can be any iterator of floats,
    which allows for signals of infinite length. This is useful if we don&#39;t
    know the length of of the final signal beforehand. (See method
    `Signal.over` for the conversion to a finite sound.) This also means
    that `frames` might be only be capable iterating only once.
    (See `Signal.tee` for the cloning of signals.) The values of `frames`
    are floats without any other limitations.
    &#34;&#34;&#34;

    def __init__(self, input: SignalLike) -&gt; None:
        &#34;&#34;&#34;Create a signal from a SignalLike input&#34;&#34;&#34;
        if isinstance(input, Signal):
            self.frames = input.frames
        elif isinstance(input, (int, float)):
            self.frames = it.repeat(input)
        elif isinstance(input, Iterable):
            self.frames = input
        else:
            t = type(input).__qualname__
            raise TypeError(f&#34;Cannot create a signal from type {t}&#34;)

    def __add__(self, other: SignalLike) -&gt; Self:
        return self._bin_op(other, lambda x, y: x + y)

    def __radd__(self, other: SignalLike) -&gt; Self:
        return self._bin_op(other, lambda x, y: y + x)

    def __neg__(self) -&gt; Self:
        return self.map(lambda x: -x)

    def __sub__(self, other: SignalLike) -&gt; Self:
        return self._bin_op(other, lambda x, y: x - y)

    def __rsub__(self, other: SignalLike) -&gt; Self:
        return self._bin_op(other, lambda x, y: y - x)

    def __mul__(self, other: SignalLike) -&gt; Self:
        return self._bin_op(other, lambda x, y: x * y)

    def __rmul__(self, other: SignalLike) -&gt; Self:
        return self._bin_op(other, lambda x, y: y * x)

    def __truediv__(self, other: SignalLike) -&gt; Self:
        return self._bin_op(other, lambda x, y: x / y)

    def __rtruediv__(self, other: SignalLike) -&gt; Self:
        return self._bin_op(other, lambda x, y: y / x)

    def __pow__(self, other: SignalLike) -&gt; Self:
        return self._bin_op(other, lambda x, y: x**y)

    def __rpow__(self, other: SignalLike) -&gt; Self:
        return self._bin_op(other, lambda x, y: y**x)

    def _bin_op(
        self,
        other: SignalLike,
        op: Callable[[float, float], float],
    ) -&gt; Self:
        if isinstance(other, FinSignal):
            self, other = other, self
        z = zip(self.frames, Signal(other).frames)
        return self.__class__(op(x, y) for x, y in z)

    def tee(self, n: int = 2) -&gt; list[Self]:
        &#34;&#34;&#34;Return n independent signals created using self.&#34;&#34;&#34;
        return [self.__class__(frames) for frames in it.tee(self.frames, n)]

    def over(self, dur: float) -&gt; FinSignal:
        &#34;&#34;&#34;Return the a finite signal consisting of the start of
        the signal over the specified duration.&#34;&#34;&#34;
        return FinSignal(it.islice(self.frames, round(dur * samprate)))

    def extend(self) -&gt; Signal:
        &#34;&#34;&#34;Return an infinite signal with begins with self and
        continues as a constant zaro signal.&#34;&#34;&#34;
        return Signal(it.chain(self.frames, it.repeat(0.0)))

    @overload
    def repeat(self, times: None) -&gt; Signal: ...
    @overload
    def repeat(self, times: int) -&gt; Self: ...
    def repeat(self, times: int | None = None) -&gt; Signal:
        &#34;&#34;&#34;Repeat the signal. If `times` is `None`, repeat infinitely.&#34;&#34;&#34;

        def frames():
            for _ in it.count() if times is None else range(times):
                for frame in self.frames:
                    yield frame

        if times is None:
            return Signal(frames())
        else:
            return self.__class__(frames())

    # For more info about the low-pass implementation, see
    # https://en.wikipedia.org/wiki/Low-pass_filter#Discrete-time_realization.

    def lowpass(self, cutoff: SignalLike) -&gt; Self:
        &#34;&#34;&#34;Apply the low-pass filter with a specified cutoff frequency&#34;&#34;&#34;
        return self.lowpasst(1 / ((2 * pi) * Signal(cutoff)))

    def lowpasst(self, tau: SignalLike) -&gt; Self:
        &#34;&#34;&#34;Apply the low-pass filter with a specified time constant&#34;&#34;&#34;
        a = 1 / (samprate * Signal(tau) + 1)

        def frames() -&gt; Iterable[float]:
            y_fr = 0.0
            for a_fr, x_fr in zip(a.frames, self.frames):
                y_fr = a_fr * x_fr + (1 - a_fr) * y_fr
                yield y_fr

        return self.__class__(frames())

    # For more info about the high-pass implementation, see
    # https://en.wikipedia.org/wiki/High-pass_filter#Discrete-time_realization.

    def highpasst(self, tau: SignalLike) -&gt; Self:
        &#34;&#34;&#34;Apply the high-pass filter with a specified time constant&#34;&#34;&#34;
        return self.highpass(1 / ((2 * pi) * Signal(tau)))

    def highpass(self, cutoff: SignalLike) -&gt; Self:
        &#34;&#34;&#34;Apply the high-pass filter with a specified cutoff frequency&#34;&#34;&#34;
        a = 1 / ((2 * pi / samprate) * Signal(cutoff) + 1)

        def frames() -&gt; Iterable[float]:
            y_fr = prev_x_fr = 0.0
            for a_fr, x_fr in zip(a.frames, self.frames):
                y_fr = a_fr * (y_fr + x_fr - prev_x_fr)
                yield y_fr
                prev_x_fr = x_fr

        return self.__class__(frames())

    def distort(self, f: Callable[[float], float]) -&gt; Self:
        &#34;&#34;&#34;Distort the signal by applying f to each frame. All frames
        are scaled to (-1, 1)&#34;&#34;&#34;
        m = max(self.map(abs).frames)
        return self.map(lambda x: f(x / m))

    def delay(self, period: float, coeff: float) -&gt; Signal:
        &#34;&#34;&#34;Apply a _delay effect_ scaled by `coeff` to the signal with the
        specified period.&#34;&#34;&#34;
        shift = round(period * samprate)
        history = collections.deque()

        def frames() -&gt; Iterable[float]:
            for x in self.frames:
                echo = history.popleft() if len(history) == shift else 0
                history.append(x + coeff * echo)
                yield history[-1]

        return self.__class__(frames())

    def map(self, func: Callable[[float], float]) -&gt; Self:
        &#34;&#34;&#34;Apply func to each frame of the signal&#34;&#34;&#34;
        return self.__class__(map(func, self.frames))

    def reverb(self, imp_res: FinSignal) -&gt; Self:
        &#34;&#34;&#34;Apply a convolution reverb with a given impulse response

        .. note::
           This method on the `Signal` class may be slow. Consider first
           converting the signal to `FinSignal`, which has a faster
           implementation based on FFT.
        &#34;&#34;&#34;
        kernel = reversed(imp_res.frames)
        k = len(kernel)
        window = collections.deque([0.0] * k)

        def frames() -&gt; Iterable[float]:
            for x in it.chain(kernel, [0.0] * (k - 1)):
                window.popleft()
                window.append(x)
                yield sum(a * b for a, b in zip(window, kernel))

        return self.__class__(frames())</code></pre>
</details>
<div class="desc"><p>The fundamental class of the module for discrete signals</p>
<p>This type supports all the usual Python arithmetic operations,
which perform their float equivalents for each frame. For binary
operations, the resulting signal is only as long as the shortest
input signal.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the context of audio manipulation, we can use instances of this
class both as audio signals and control signals e.g. to control
volume or pitch.</p>
</div>
<p>Create a signal from a SignalLike input</p></div>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="audio_janq0.Signal.frames"><code class="name">var <span class="ident">frames</span> :Â Iterable[float]</code></dt>
<dd>
<div class="desc"><p>This can be any iterator of floats,
which allows for signals of infinite length. This is useful if we don't
know the length of of the final signal beforehand. (See method
<code><a title="audio_janq0.Signal.over" href="#audio_janq0.Signal.over">Signal.over()</a></code> for the conversion to a finite sound.) This also means
that <code>frames</code> might be only be capable iterating only once.
(See <code><a title="audio_janq0.Signal.tee" href="#audio_janq0.Signal.tee">Signal.tee()</a></code> for the cloning of signals.) The values of <code>frames</code>
are floats without any other limitations.</p></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="audio_janq0.Signal.delay"><code class="name flex">
<span>def <span class="ident">delay</span></span>(<span>self, period:Â float, coeff:Â float) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delay(self, period: float, coeff: float) -&gt; Signal:
    &#34;&#34;&#34;Apply a _delay effect_ scaled by `coeff` to the signal with the
    specified period.&#34;&#34;&#34;
    shift = round(period * samprate)
    history = collections.deque()

    def frames() -&gt; Iterable[float]:
        for x in self.frames:
            echo = history.popleft() if len(history) == shift else 0
            history.append(x + coeff * echo)
            yield history[-1]

    return self.__class__(frames())</code></pre>
</details>
<div class="desc"><p>Apply a <em>delay effect</em> scaled by <code>coeff</code> to the signal with the
specified period.</p></div>
</dd>
<dt id="audio_janq0.Signal.distort"><code class="name flex">
<span>def <span class="ident">distort</span></span>(<span>self, f:Â Callable[[float],Â float]) â€‘>Â Self</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def distort(self, f: Callable[[float], float]) -&gt; Self:
    &#34;&#34;&#34;Distort the signal by applying f to each frame. All frames
    are scaled to (-1, 1)&#34;&#34;&#34;
    m = max(self.map(abs).frames)
    return self.map(lambda x: f(x / m))</code></pre>
</details>
<div class="desc"><p>Distort the signal by applying f to each frame. All frames
are scaled to (-1, 1)</p></div>
</dd>
<dt id="audio_janq0.Signal.extend"><code class="name flex">
<span>def <span class="ident">extend</span></span>(<span>self) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def extend(self) -&gt; Signal:
    &#34;&#34;&#34;Return an infinite signal with begins with self and
    continues as a constant zaro signal.&#34;&#34;&#34;
    return Signal(it.chain(self.frames, it.repeat(0.0)))</code></pre>
</details>
<div class="desc"><p>Return an infinite signal with begins with self and
continues as a constant zaro signal.</p></div>
</dd>
<dt id="audio_janq0.Signal.highpass"><code class="name flex">
<span>def <span class="ident">highpass</span></span>(<span>self,<br>cutoff:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>) â€‘>Â Self</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def highpass(self, cutoff: SignalLike) -&gt; Self:
    &#34;&#34;&#34;Apply the high-pass filter with a specified cutoff frequency&#34;&#34;&#34;
    a = 1 / ((2 * pi / samprate) * Signal(cutoff) + 1)

    def frames() -&gt; Iterable[float]:
        y_fr = prev_x_fr = 0.0
        for a_fr, x_fr in zip(a.frames, self.frames):
            y_fr = a_fr * (y_fr + x_fr - prev_x_fr)
            yield y_fr
            prev_x_fr = x_fr

    return self.__class__(frames())</code></pre>
</details>
<div class="desc"><p>Apply the high-pass filter with a specified cutoff frequency</p></div>
</dd>
<dt id="audio_janq0.Signal.highpasst"><code class="name flex">
<span>def <span class="ident">highpasst</span></span>(<span>self,<br>tau:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>) â€‘>Â Self</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def highpasst(self, tau: SignalLike) -&gt; Self:
    &#34;&#34;&#34;Apply the high-pass filter with a specified time constant&#34;&#34;&#34;
    return self.highpass(1 / ((2 * pi) * Signal(tau)))</code></pre>
</details>
<div class="desc"><p>Apply the high-pass filter with a specified time constant</p></div>
</dd>
<dt id="audio_janq0.Signal.lowpass"><code class="name flex">
<span>def <span class="ident">lowpass</span></span>(<span>self,<br>cutoff:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>) â€‘>Â Self</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def lowpass(self, cutoff: SignalLike) -&gt; Self:
    &#34;&#34;&#34;Apply the low-pass filter with a specified cutoff frequency&#34;&#34;&#34;
    return self.lowpasst(1 / ((2 * pi) * Signal(cutoff)))</code></pre>
</details>
<div class="desc"><p>Apply the low-pass filter with a specified cutoff frequency</p></div>
</dd>
<dt id="audio_janq0.Signal.lowpasst"><code class="name flex">
<span>def <span class="ident">lowpasst</span></span>(<span>self,<br>tau:Â <a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a>) â€‘>Â Self</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def lowpasst(self, tau: SignalLike) -&gt; Self:
    &#34;&#34;&#34;Apply the low-pass filter with a specified time constant&#34;&#34;&#34;
    a = 1 / (samprate * Signal(tau) + 1)

    def frames() -&gt; Iterable[float]:
        y_fr = 0.0
        for a_fr, x_fr in zip(a.frames, self.frames):
            y_fr = a_fr * x_fr + (1 - a_fr) * y_fr
            yield y_fr

    return self.__class__(frames())</code></pre>
</details>
<div class="desc"><p>Apply the low-pass filter with a specified time constant</p></div>
</dd>
<dt id="audio_janq0.Signal.map"><code class="name flex">
<span>def <span class="ident">map</span></span>(<span>self, func:Â Callable[[float],Â float]) â€‘>Â Self</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def map(self, func: Callable[[float], float]) -&gt; Self:
    &#34;&#34;&#34;Apply func to each frame of the signal&#34;&#34;&#34;
    return self.__class__(map(func, self.frames))</code></pre>
</details>
<div class="desc"><p>Apply func to each frame of the signal</p></div>
</dd>
<dt id="audio_janq0.Signal.over"><code class="name flex">
<span>def <span class="ident">over</span></span>(<span>self, dur:Â float) â€‘>Â <a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def over(self, dur: float) -&gt; FinSignal:
    &#34;&#34;&#34;Return the a finite signal consisting of the start of
    the signal over the specified duration.&#34;&#34;&#34;
    return FinSignal(it.islice(self.frames, round(dur * samprate)))</code></pre>
</details>
<div class="desc"><p>Return the a finite signal consisting of the start of
the signal over the specified duration.</p></div>
</dd>
<dt id="audio_janq0.Signal.repeat"><code class="name flex">
<span>def <span class="ident">repeat</span></span>(<span>self, times:Â intÂ |Â NoneÂ =Â None) â€‘>Â <a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def repeat(self, times: int | None = None) -&gt; Signal:
    &#34;&#34;&#34;Repeat the signal. If `times` is `None`, repeat infinitely.&#34;&#34;&#34;

    def frames():
        for _ in it.count() if times is None else range(times):
            for frame in self.frames:
                yield frame

    if times is None:
        return Signal(frames())
    else:
        return self.__class__(frames())</code></pre>
</details>
<div class="desc"><p>Repeat the signal. If <code>times</code> is <code>None</code>, repeat infinitely.</p></div>
</dd>
<dt id="audio_janq0.Signal.reverb"><code class="name flex">
<span>def <span class="ident">reverb</span></span>(<span>self,<br>imp_res:Â <a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a>) â€‘>Â Self</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reverb(self, imp_res: FinSignal) -&gt; Self:
    &#34;&#34;&#34;Apply a convolution reverb with a given impulse response

    .. note::
       This method on the `Signal` class may be slow. Consider first
       converting the signal to `FinSignal`, which has a faster
       implementation based on FFT.
    &#34;&#34;&#34;
    kernel = reversed(imp_res.frames)
    k = len(kernel)
    window = collections.deque([0.0] * k)

    def frames() -&gt; Iterable[float]:
        for x in it.chain(kernel, [0.0] * (k - 1)):
            window.popleft()
            window.append(x)
            yield sum(a * b for a, b in zip(window, kernel))

    return self.__class__(frames())</code></pre>
</details>
<div class="desc"><p>Apply a convolution reverb with a given impulse response</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method on the <code><a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></code> class may be slow. Consider first
converting the signal to <code><a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a></code>, which has a faster
implementation based on FFT.</p>
</div></div>
</dd>
<dt id="audio_janq0.Signal.tee"><code class="name flex">
<span>def <span class="ident">tee</span></span>(<span>self, n:Â intÂ =Â 2) â€‘>Â list[typing.Self]</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def tee(self, n: int = 2) -&gt; list[Self]:
    &#34;&#34;&#34;Return n independent signals created using self.&#34;&#34;&#34;
    return [self.__class__(frames) for frames in it.tee(self.frames, n)]</code></pre>
</details>
<div class="desc"><p>Return n independent signals created using self.</p></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
</ul>
</div>
<ul id="index">
<li><h3><a href="#header-variables">Global variables</a></h3>
<ul class="">
<li><code><a title="audio_janq0.SignalLike" href="#audio_janq0.SignalLike">SignalLike</a></code></li>
<li><code><a title="audio_janq0.samprate" href="#audio_janq0.samprate">samprate</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="two-column">
<li><code><a title="audio_janq0.compose" href="#audio_janq0.compose">compose</a></code></li>
<li><code><a title="audio_janq0.decay" href="#audio_janq0.decay">decay</a></code></li>
<li><code><a title="audio_janq0.exp" href="#audio_janq0.exp">exp</a></code></li>
<li><code><a title="audio_janq0.linear" href="#audio_janq0.linear">linear</a></code></li>
<li><code><a title="audio_janq0.load" href="#audio_janq0.load">load</a></code></li>
<li><code><a title="audio_janq0.rect" href="#audio_janq0.rect">rect</a></code></li>
<li><code><a title="audio_janq0.rise" href="#audio_janq0.rise">rise</a></code></li>
<li><code><a title="audio_janq0.saw" href="#audio_janq0.saw">saw</a></code></li>
<li><code><a title="audio_janq0.sine" href="#audio_janq0.sine">sine</a></code></li>
<li><code><a title="audio_janq0.step" href="#audio_janq0.step">step</a></code></li>
<li><code><a title="audio_janq0.stepdown" href="#audio_janq0.stepdown">stepdown</a></code></li>
<li><code><a title="audio_janq0.triangle" href="#audio_janq0.triangle">triangle</a></code></li>
<li><code><a title="audio_janq0.white" href="#audio_janq0.white">white</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="audio_janq0.FinSignal" href="#audio_janq0.FinSignal">FinSignal</a></code></h4>
<ul class="two-column">
<li><code><a title="audio_janq0.FinSignal.dur" href="#audio_janq0.FinSignal.dur">dur</a></code></li>
<li><code><a title="audio_janq0.FinSignal.export" href="#audio_janq0.FinSignal.export">export</a></code></li>
<li><code><a title="audio_janq0.FinSignal.normalised" href="#audio_janq0.FinSignal.normalised">normalised</a></code></li>
<li><code><a title="audio_janq0.FinSignal.play" href="#audio_janq0.FinSignal.play">play</a></code></li>
<li><code><a title="audio_janq0.FinSignal.reverb" href="#audio_janq0.FinSignal.reverb">reverb</a></code></li>
<li><code><a title="audio_janq0.FinSignal.reversed" href="#audio_janq0.FinSignal.reversed">reversed</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="audio_janq0.Signal" href="#audio_janq0.Signal">Signal</a></code></h4>
<ul class="two-column">
<li><code><a title="audio_janq0.Signal.delay" href="#audio_janq0.Signal.delay">delay</a></code></li>
<li><code><a title="audio_janq0.Signal.distort" href="#audio_janq0.Signal.distort">distort</a></code></li>
<li><code><a title="audio_janq0.Signal.extend" href="#audio_janq0.Signal.extend">extend</a></code></li>
<li><code><a title="audio_janq0.Signal.frames" href="#audio_janq0.Signal.frames">frames</a></code></li>
<li><code><a title="audio_janq0.Signal.highpass" href="#audio_janq0.Signal.highpass">highpass</a></code></li>
<li><code><a title="audio_janq0.Signal.highpasst" href="#audio_janq0.Signal.highpasst">highpasst</a></code></li>
<li><code><a title="audio_janq0.Signal.lowpass" href="#audio_janq0.Signal.lowpass">lowpass</a></code></li>
<li><code><a title="audio_janq0.Signal.lowpasst" href="#audio_janq0.Signal.lowpasst">lowpasst</a></code></li>
<li><code><a title="audio_janq0.Signal.map" href="#audio_janq0.Signal.map">map</a></code></li>
<li><code><a title="audio_janq0.Signal.over" href="#audio_janq0.Signal.over">over</a></code></li>
<li><code><a title="audio_janq0.Signal.repeat" href="#audio_janq0.Signal.repeat">repeat</a></code></li>
<li><code><a title="audio_janq0.Signal.reverb" href="#audio_janq0.Signal.reverb">reverb</a></code></li>
<li><code><a title="audio_janq0.Signal.tee" href="#audio_janq0.Signal.tee">tee</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
